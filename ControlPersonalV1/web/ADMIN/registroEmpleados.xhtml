<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>Control personal</title>
            </f:facet>
        </h:head>

         <h:body style="font-size: 12px;" >

            <p:layout fullPage="true">

                <p:layoutUnit position="north" size="230" resizable="true" closable="true" collapsible="true">

                    <h:graphicImage url="../images/bannerC.png" alt="Logo"  style="vertical-align: top;" />

                </p:layoutUnit>


                <p:layoutUnit position="west" size="230" header="Control Personal" collapsible="true">
                    <h:form id="formularioMenu"> 
                        <p:menu>



                            <p:submenu label="Menu Registros">

                                <p:menuitem value="Usuarios" url="Usuario.xhtml" />
                       
                                <p:menuitem value="Contratista" url="registroContratista.xhtml" />
                                 <p:menuitem value="Ingresos" url="index.xhtml" />


                            </p:submenu>

                            <p:submenu label="Menu Reportes">
                                <p:menuitem value="Reportes" url="faces/index.xhtml"/>

                            </p:submenu>

                        </p:menu>


                        <p:commandButton   id="btnCerrar" action="#{usuarioVista.cerrarSesion_action}" style="width: 100%" value="Cerrar Sesion" />

                    </h:form>
                </p:layoutUnit>

                <p:layoutUnit position="center">
                    <h:form id="formulario"> 

                        <p:messages id="mensajes" showDetail="true" />
                        <p:panel header="Datos del Empleado: ">
                            <p:panelGrid id="panelUsuario" columns="4" style="width: 82%;">

                                <h:outputText value="Nombre:"/>
                                <p:inputText id="txtNombre" binding="#{empleadoVista.txtNombre}"/>

                                <h:outputText value="Apellido:"/>
                                <p:inputText id="txtApellido" binding="#{empleadoVista.txtApellido}"/>

                                <h:outputText value="Cedula:"/>
                                <p:inputText id="txtCedula" binding="#{empleadoVista.txtCedula}"/>

                                <h:outputText value="Telefono:"/>
                                <p:inputText id="txtTelefono" binding="#{empleadoVista.txtTelefono}"/>

                                <h:outputText value="Correo:"/>
                                <p:inputText id="txtCorreo" binding="#{empleadoVista.txtCorreo}"/>

                                <h:outputText value="Eps:"/>

                                <p:selectOneMenu id="cmbEps" binding="#{empleadoVista.cmbEps}" >

                                    <f:selectItem itemLabel="SELECCIONE" itemValue="SELECCIONE" />
                                    <f:selectItem itemLabel="SI" itemValue="SI" />
                                    <f:selectItem itemLabel="NO" itemValue="NO" />                               
                                </p:selectOneMenu> 

                                <h:outputText value="Arl:"/>

                                <p:selectOneMenu id="cmbArl" binding="#{empleadoVista.cmbArl}" >

                                    <f:selectItem itemLabel="SELECCIONE" itemValue="SELECCIONE" />
                                    <f:selectItem itemLabel="SI" itemValue="SI" />
                                    <f:selectItem itemLabel="NO" itemValue="NO" />                               
                                </p:selectOneMenu> 

                                <h:outputText   value="Estado:"/>
                                <p:inputText  disabled="true" id="txtEstado" binding="#{empleadoVista.txtEstadoEmpleado}"/>



                                <p:commandButton   id="btnCerrar" action="#{usuarioVista.cerrarSesion_action}" style="width: 100%" value="Contratista:" />
                                <p:inputText disabled="true" id="txtContratista" binding="#{empleadoVista.txtCodigoContratista}"/>


                            </p:panelGrid>
                        </p:panel>

                        <p:panelGrid id="pnlBotones" columns="4" style="width: 82%;">
                            <f:facet name="footer"> 
                                <div align="center"> 
                                    <p:commandButton  id="btnRegistrar" action="#{empleadoVista.registrar_action()}" value="Registrar" binding="#{empleadoVista.btnRegistrar}" update=":formulario:mensajes,:formulario:panelUsuario,:formulario:panelTabla" />
                                    <p:commandButton  id="btnModificar" action="#{empleadoVista.modificar_action}" value="Modificar" binding="#{empleadoVista.btnModificar}" update=":formulario:mensajes,:formulario:panelUsuario,:formulario:panelTabla"/>
                                    <p:commandButton  id="btnLimpiar" action="#{empleadoVista.limpiar()}" value="Limpiar" binding="#{empleadoVista.btnLimpiar}" update=":formulario" />
                                    <p:commandButton  id="btnActivar" action="#{empleadoVista.activar_action()}" value="Activar" binding="#{empleadoVista.btnActivar}" onclick="PF('confirmation2').show();"  type="button"/>
                                    <p:commandButton  id="btnInactivar" action="#{empleadoVista.inactivar_action()}" value="Inactivar" binding="#{empleadoVista.btnInactivo}" onclick="PF('confirmation1').show();"  type="button"/>

                                </div>
                            </f:facet>
                        </p:panelGrid>       

                        <p:panel id="panelTabla">   
                            <p:dataTable var="empleado" value="#{empleadoVista.listaEmpleado}" rows="10"
                                         paginator="true"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15"
                                         rowKey="#{empleado.cedulaempleado}"
                                         selection="#{empleadoVista.selectedEmpleado}"
                                         selectionMode="single"
                                         filteredValue="#{empleadoVista.listaEmpleado}"
                                         >
                                <p:ajax 
                                    event="rowSelect"
                                    listener="#{empleadoVista.seleccionarEmpleado}"
                                    update=":formulario:pnlBotones,:formulario:panelUsuario "
                                    />


                                <p:column headerText="Cedula"   filterBy="#{empleado.cedulaempleado}" filterMatchMode="contains">
                                    <h:outputText value="#{empleado.cedulaempleado}" />
                                </p:column>


                                <p:column headerText="Nombre" filterBy="#{empleado.nombreempleado}" filterMatchMode="contains">
                                    <h:outputText value="#{empleado.nombreempleado}" />
                                </p:column>

                                <p:column headerText="Apellido"  filterBy="#{empleado.apellidoempleado}" filterMatchMode="contains" >
                                    <h:outputText  value="#{empleado.apellidoempleado}" />
                                </p:column>

                                <p:column headerText="Telefono"  >
                                    <h:outputText value="#{empleado.telefonoempleado}" />
                                </p:column>

                                <p:column headerText="Correo"  >
                                    <h:outputText  value="#{empleado.correoempleado}" />
                                </p:column>


                                <p:column headerText="Eps" filterBy="#{empleado.epsempleado}" filterMatchMode="contains" >
                                    <h:outputText value="#{empleado.epsempleado}" />
                                </p:column>

                                <p:column headerText="Arl" filterBy="#{empleado.arlempleado}" filterMatchMode="contains">
                                    <h:outputText  value="#{empleado.arlempleado}" />
                                </p:column>

                                <p:column headerText="Estado" filterBy="#{empleado.estadoempleado}" filterMatchMode="contains">
                                    <h:outputText value="#{empleado.estadoempleado}" />
                                </p:column>

                                <p:column headerText="Nit Contratista" filterBy="#{empleado.contratistaempleado.nitcontratista}" filterMatchMode="contains">
                                    <h:outputText  value="#{empleado.contratistaempleado.nitcontratista}" />
                                </p:column>

                                <p:column headerText="Nombre Contratista" filterBy="#{empleado.contratistaempleado.nombrecontratista}" filterMatchMode="contains">
                                    <h:outputText  value="#{empleado.contratistaempleado.nombrecontratista}" />
                                </p:column>


                            </p:dataTable>
                        </p:panel>
                        <br/>
                        <br/>
                    </h:form>

                    <div  align="center">

                        CONTACTENOS   <br/>       
                        Ventas
                        compat5@hotmail.com
                        Cel: 3162902471   <br/>   
                        Gerencia
                        Arturo Rios Pedroza
                        compat5@hotmail.com
                        Cel: 3162902471    <br/>   

                        Dirección: CR 41 #  35-51 Oficina 107.  <br/>  Tulua - Colombia        <br/>   
                        Actualizada el 15/05/2016. <br/>  Todos los derechos reservados WWW.DILOVE.COM.CO ®

                    </div>
                </p:layoutUnit>

            </p:layout>


            <h:form id="formDialog1" > 
                <p:confirmDialog id="confirmDialog1" message="Está Seguro de inactivarlo el usuario?"  
                                 header="Confirmación1" showEffect="fade" hideEffect="explode" severity="alert" widgetVar="confirmation1">  
                    <p:commandButton id="confirm1" value="Si" oncomplete="PF('confirmation1').hide();" 
                                     update=":formulario:mensajes"  
                                     actionListener="#{empleadoVista.inactivar_action()}" />  
                    <p:commandButton id="decline" value="No" onclick="PF('confirmation1').hide();" type="button" />   

                </p:confirmDialog> 
            </h:form>

            <h:form id="formDialog2" > 
                <p:confirmDialog id="confirmDialog2" message="Está Seguro de activarlo el usuario?"  
                                 header="Confirmación2" showEffect="fade" hideEffect="explode" severity="alert" widgetVar="confirmation2">  
                    <p:commandButton id="confirm2" value="Si" oncomplete="PF('confirmation2').hide();" 
                                     update=":formulario:mensajes"  
                                     actionListener="#{empleadoVista.activar_action()}" />  
                    <p:commandButton id="decline" value="No" onclick="PF('confirmation2').hide();" type="button" />   

                </p:confirmDialog> 
            </h:form>

        </h:body>

    </f:view>
</html>



